<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>STUDBISS ‚Äî –ö–∞–±–∏–Ω–µ—Ç —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ (–∑–∞—â–∏—â—ë–Ω–Ω—ã–π)</title>
<style>
  :root{--brand:#0b63a4;--bg:#f7f9fb;--card:#fff;--muted:#6b7280;}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#111;}
  header{background:var(--brand);color:#fff;padding:18px 20px;text-align:center;font-weight:700;font-size:1.25rem;}
  .container{max-width:1024px;margin:28px auto;padding:0 18px;}
  .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.06);}
  .center{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;}
  h1,h2{margin:0 0 12px 0;color:var(--brand);}
  p.lead{color:var(--muted);margin:0 0 18px 0;}
  .btn{background:var(--brand);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;margin:8px;}
  .btn.ghost{background:transparent;color:var(--brand);border:2px solid var(--brand);}
  .flex{display:flex;gap:12px;flex-wrap:wrap;align-items:center;}
  .page{display:none;margin-top:18px;}
  .active{display:block;}
  .big-actions{display:flex;gap:18px;justify-content:center;flex-wrap:wrap;margin-top:14px;}
  .input-wrap{max-width:420px;margin:0 auto;text-align:left;}
  label{display:block;font-weight:600;margin-top:8px;font-size:0.95rem;}
  input[type="password"], input[type="text"], input[type="email"], textarea, select{width:100%;padding:10px;border-radius:8px;border:1px solid #d6d8dd;margin-top:6px;box-sizing:border-box;font-size:0.95rem;}
  .hint{font-size:0.88rem;color:var(--muted);margin-top:6px;}
  .cards-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-top:14px;}
  .dept-card{background:#fff;border-radius:10px;padding:16px;box-shadow:0 6px 16px rgba(2,6,23,0.05);cursor:pointer;border-left:6px solid var(--brand);}
  .dept-card h3{margin:0 0 6px 0;}
  .small{font-size:0.86rem;color:var(--muted);}
  .popup{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:60;}
  .popup .modal{max-width:520px;width:100%;background:#fff;padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.2);}
  .row{display:flex;gap:10px;align-items:center;}
  .table-wrap{overflow:auto;margin-top:12px;}
  table{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;}
  th,td{padding:10px;border-bottom:1px solid #eef2f7;text-align:left;}
  th{background:#f3f7fb;color:var(--muted);font-weight:700;}
  td[contenteditable]{background:linear-gradient(180deg,rgba(11,99,164,0.03),transparent);}
  select.inline{padding:6px;border-radius:6px;border:1px solid #d6d8dd;}
  .controls{display:flex;gap:8px;align-items:center;margin-top:12px;}
  .muted{color:var(--muted);font-size:0.9rem;}
  .right{margin-left:auto;}
  .danger{background:#ff4d4f;color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;}
  footer{margin:28px 0 60px 0;text-align:center;color:var(--muted);font-size:0.9rem;}
  .status-pill{display:inline-block;padding:6px 8px;border-radius:999px;font-weight:700;font-size:0.85rem;}
  .status-inprogress{background:#fff4e6;color:#b45309;border:1px solid #fde7c8;}
  .status-done{background:#ecfdf5;color:#065f46;border:1px solid #bbf7d0;}
  .status-onhold{background:#f3f4f6;color:#374151;border:1px solid #e5e7eb;}
  .status-cancel{background:#fff1f2;color:#831843;border:1px solid #fed7e2;}
  .topbar{display:flex;align-items:center;gap:12px;margin-bottom:12px;}
  .back-link{background:transparent;border:0;color:var(--brand);cursor:pointer;font-weight:700;padding:6px 8px;border-radius:8px;}
</style>
</head>
<body>
<header>–ë–∏–∑–Ω–µ—Å-–∫–ª—É–± –£–£–ù–∏–¢ ¬´STUDBISS¬ª ‚Äî –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</header>

<div class="container">

  <!-- Home page -->
  <div id="homePage" class="page active card center">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ STUDBISS</h1>
    <p class="lead">–í—ã —Ä–µ–∑–∏–¥–µ–Ω—Ç –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è? –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ.</p>
    <div class="big-actions">
      <button class="btn" onclick="showPage('residentLogin')">üíº –Ø ‚Äî —Ä–µ–∑–∏–¥–µ–Ω—Ç (–≤–æ–π—Ç–∏)</button>
      <button class="btn ghost" onclick="showPage('new')">üöÄ –Ø ‚Äî –Ω–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫</button>
    </div>
    <p class="hint">–ü–∞—Ä–æ–ª–∏ –∑–∞—â–∏—â–µ–Ω—ã ‚Äî –≤–≤–æ–¥ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç –∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã.</p>
  </div>

  <!-- New participant -->
  <div id="new" class="page card">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞</h2>
    <p class="small">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.</p>
    <form id="regForm" onsubmit="event.preventDefault(); alert('–°–ø–∞—Å–∏–±–æ! –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ ‚Äî –ø–æ–∫–∞ —Å–∏–º—É–ª—è—Ü–∏—è.'); showPage('homePage')">
      <div class="input-wrap">
        <label>–ò–º—è</label><input type="text" required>
        <label>–§–∞–º–∏–ª–∏—è</label><input type="text" required>
        <label>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label><input type="email" required>
        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label><input type="text" required>
        <label>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞</label>
        <select required>
          <option value="">-- –≤—ã–±–µ—Ä–∏—Ç–µ --</option>
          <option>–ú–µ–¥–∏–∞</option>
          <option>–ò–≤–µ–Ω—Ç</option>
          <option>–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ</option>
          <option>–§–∞–Ω–¥—Ä–∞–π–∑</option>
        </select>
        <label>–ü–æ—á–µ–º—É —Ö–æ—Ç–∏—Ç–µ –≤ STUDBISS?</label><textarea rows="4" required></textarea>
        <div class="controls"><button class="btn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button><button class="btn ghost" type="button" onclick="showPage('homePage')">–ù–∞–∑–∞–¥</button></div>
      </div>
    </form>
  </div>

  <!-- Resident login -->
  <div id="residentLogin" class="page card">
    <h2>–í—Ö–æ–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞</h2>
    <p class="small">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.</p>
    <div class="input-wrap">
      <label>–ü–∞—Ä–æ–ª—å —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞</label>
      <input id="residentPassword" type="password" />
      <div style="margin-top:10px;" class="controls">
        <button class="btn" onclick="checkResident()">–í–æ–π—Ç–∏</button>
        <button class="btn ghost" onclick="showPage('homePage')">–û—Ç–º–µ–Ω–∞</button>
        <div id="resHint" class="muted right"></div>
      </div>
    </div>
  </div>

  <!-- Resident cabinet (protected) -->
  <div id="cabinet" class="page card">
    <div class="topbar">
      <button class="back-link" onclick="logout()">‚üµ –í—ã–π—Ç–∏</button>
      <h2 style="margin:0">–ö–∞–±–∏–Ω–µ—Ç —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞</h2>
    </div>
    <p class="small">–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å.</p>
    <div class="cards-grid">
      <div class="dept-card" onclick="promptDept('media')"><h3>üé• –ú–µ–¥–∏–∞</h3><p class="small">–ö–æ–Ω—Ç–µ–Ω—Ç, —Å–æ—Ü—Å–µ—Ç–∏, –¥–∏–∑–∞–π–Ω ‚Äî –ø–∞—Ä–æ–ª—å —Ç—Ä–µ–±—É–µ—Ç—Å—è.</p></div>
      <div class="dept-card" onclick="promptDept('event')"><h3>üé§ –ò–≤–µ–Ω—Ç</h3><p class="small">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π. –ü–∞—Ä–æ–ª—å —Ç—Ä–µ–±—É–µ—Ç—Å—è.</p></div>
      <div class="dept-card" onclick="promptDept('strat')"><h3>üìà –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ</h3><p class="small">–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤. –ü–∞—Ä–æ–ª—å —Ç—Ä–µ–±—É–µ—Ç—Å—è.</p></div>
      <div class="dept-card" onclick="promptDept('fund')"><h3>üí∞ –§–∞–Ω–¥—Ä–∞–π–∑</h3><p class="small">–ü–æ–∏—Å–∫ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤ –∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤. –ü–∞—Ä–æ–ª—å —Ç—Ä–µ–±—É–µ—Ç—Å—è.</p></div>
    </div>
  </div>

  <!-- Department: Media (protected page) -->
  <div id="mediaPage" class="page card">
    <div class="topbar">
      <button class="back-link" onclick="showPage('cabinet')">‚üµ –ù–∞–∑–∞–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç</button>
      <h2 style="margin:0">–ú–µ–¥–∏–∞ ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω</h2>
    </div>
    <p class="small">–¢–∞–±–ª–∏—Ü–∞ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞. –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —è—á–µ–π–∫–∏ –∏ –≤—ã–±–∏—Ä–∞—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ / —Å—Ç–∞—Ç—É—Å. –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</p>
    <div class="controls" style="margin-top:12px;">
      <button class="btn" onclick="addRow()">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
      <button class="btn ghost" onclick="clearMedia()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
      <div class="right muted">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ: –ù–∏–∫–∏—Ç–∞ (—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –º–µ–¥–∏–∞), –Æ–ª—è (–∑–∞–º. —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è)</div>
    </div>

    <div class="table-wrap">
      <table id="mediaTable" class="card" style="margin-top:12px;">
        <thead>
          <tr><th style="width:110px">–î–∞—Ç–∞</th><th style="width:120px">–§–æ—Ä–º–∞—Ç</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th style="width:160px">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π</th><th style="width:140px">–°—Ç–∞—Ç—É—Å</th><th style="width:90px">–î–µ–π—Å—Ç–≤–∏—è</th></tr>
        </thead>
        <tbody id="mediaBody">
        </tbody>
      </table>
    </div>
  </div>

  <!-- Event page -->
  <div id="eventPage" class="page card">
    <div class="topbar"><button class="back-link" onclick="showPage('cabinet')">‚üµ –ù–∞–∑–∞–¥</button><h2 style="margin:0">–ò–≤–µ–Ω—Ç</h2></div>
    <p class="small">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ò–≤–µ–Ω—Ç-–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –ø–ª–∞–Ω—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —Ç–∞–π–º–ª–∞–π–Ω—ã –∏ –∑–∞–¥–∞—á–∏.</p>
  </div>

  <!-- Strategy page -->
  <div id="stratPage" class="page card">
    <div class="topbar"><button class="back-link" onclick="showPage('cabinet')">‚üµ –ù–∞–∑–∞–¥</button><h2 style="margin:0">–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ</h2></div>
    <p class="small">–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è ‚Äî –º–µ—Å—Ç–æ –¥–ª—è –∏–¥–µ–π, –¥–æ—Ä–æ–∂–Ω—ã—Ö –∫–∞—Ä—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.</p>
  </div>

  <!-- Fundraising page -->
  <div id="fundPage" class="page card">
    <div class="topbar"><button class="back-link" onclick="showPage('cabinet')">‚üµ –ù–∞–∑–∞–¥</button><h2 style="margin:0">–§–∞–Ω–¥—Ä–∞–π–∑</h2></div>
    <p class="small">–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–∞–Ω–¥—Ä–∞–π–∑–∏–Ω–≥–∞ ‚Äî —Å–ø–∏—Å–∫–∏ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è.</p>
  </div>

</div>

<!-- Popup modal for passwords and messages -->
<div id="modal" class="popup">
  <div class="modal card">
    <div id="modalContent"></div>
    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
      <button id="modalOk" class="btn">–û–ö</button>
      <button id="modalCancel" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<footer>STUDBISS ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞–∫–µ—Ç. –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (localStorage).</footer>

<script>
// Passwords (hardcoded as requested)
const PASSWORDS = {
  resident: '39681',
  media: '23789',
  event: '98709',
  strat: '34578',
  fund: '58920'
};

// Simple page navigation
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const el = document.getElementById(id);
  if(el) el.classList.add('active');
  window.scrollTo(0,0);
}

// Resident login check
function checkResident(){
  const val = document.getElementById('residentPassword').value.trim();
  const hint = document.getElementById('resHint');
  if(val === PASSWORDS.resident){
    hint.innerText = '';
    document.getElementById('residentPassword').value = '';
    showPage('cabinet');
  } else {
    hint.innerText = '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
    document.getElementById('residentPassword').value = '';
    document.getElementById('residentPassword').focus();
  }
}

// Prompt for department password
function promptDept(dept){
  const prompts = {
    media: {title:'–í—Ö–æ–¥ –≤ –ú–µ–¥–∏–∞', body:'–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ "–ú–µ–¥–∏–∞":', id:'mediaPass'},
    event: {title:'–í—Ö–æ–¥ –≤ –ò–≤–µ–Ω—Ç', body:'–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ "–ò–≤–µ–Ω—Ç":', id:'eventPass'},
    strat: {title:'–í—Ö–æ–¥ –≤ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ', body:'–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ "–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ":', id:'stratPass'},
    fund: {title:'–í—Ö–æ–¥ –≤ –§–∞–Ω–¥—Ä–∞–π–∑', body:'–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ "–§–∞–Ω–¥—Ä–∞–π–∑":', id:'fundPass'}
  };
  const cfg = prompts[dept];
  showModal(`<h3 style="margin-top:0">${cfg.title}</h3><p>${cfg.body}</p><label>–ü–∞—Ä–æ–ª—å</label><input id="${cfg.id}" type="password" style="width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #d6d8dd;">`,
    ()=>{ // OK
      const v = document.getElementById(cfg.id).value.trim();
      validateDept(dept, v);
    });
}

// Validate dept password
function validateDept(dept, value){
  if(!value) return showMessage('–ù—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å.');
  const mapping = {media: 'media', event:'event', strat:'strat', fund:'fund'};
  const key = mapping[dept];
  if(value === PASSWORDS[key]){
    // Open corresponding page
    if(dept === 'media') loadMedia(); showPage(dept+'Page'==='mediaPage'? 'mediaPage': dept+'Page');
    if(dept === 'event') showPage('eventPage');
    if(dept === 'strat') showPage('stratPage');
    if(dept === 'fund') showPage('fundPage');
    closeModal();
  } else {
    showMessage('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
  }
}

// Modal helpers
function showModal(html, onOk){
  document.getElementById('modalContent').innerHTML = html;
  document.getElementById('modal').style.display = 'flex';
  document.getElementById('modalOk').onclick = ()=>{ if(onOk) onOk(); };
  document.getElementById('modalCancel').onclick = closeModal;
}
function closeModal(){ document.getElementById('modal').style.display = 'none'; }
function showMessage(msg){ showModal('<p>'+msg+'</p>', closeModal); }

// Data storage for media table (localStorage)
const MEDIA_KEY = 'studdiss_media_plan_v1';

function loadMedia(){
  // show page and load rows
  const raw = localStorage.getItem(MEDIA_KEY);
  let rows = [];
  if(raw){
    try{ rows = JSON.parse(raw); } catch(e){ rows = []; }
  } else {
    // seed with one example row
    rows = [
      {date:'2025-10-20', format:'–ü–æ—Å—Ç', desc:'–ê–Ω–æ–Ω—Å –≤—Å—Ç—Ä–µ—á–∏ –∫–ª—É–±–∞', resp:'–ù–∏–∫–∏—Ç–∞', status:'–í –ø—Ä–æ—Ü–µ—Å—Å–µ'}
    ];
  }
  renderMedia(rows);
}

function saveMedia(rows){
  localStorage.setItem(MEDIA_KEY, JSON.stringify(rows));
  showToast('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
}

function renderMedia(rows){
  const tbody = document.getElementById('mediaBody');
  tbody.innerHTML = '';
  rows.forEach((r, idx)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td contenteditable="true" data-field="date" data-idx="${idx}">${r.date || ''}</td>
      <td contenteditable="true" data-field="format" data-idx="${idx}">${r.format || ''}</td>
      <td contenteditable="true" data-field="desc" data-idx="${idx}">${r.desc || ''}</td>
      <td>
        <select class="inline" data-field="resp" data-idx="${idx}">
          <option ${r.resp==='–ù–∏–∫–∏—Ç–∞'?'selected':''}>–ù–∏–∫–∏—Ç–∞</option>
          <option ${r.resp==='–Æ–ª—è'?'selected':''}>–Æ–ª—è</option>
        </select>
      </td>
      <td>
        <select class="inline" data-field="status" data-idx="${idx}">
          <option ${r.status==='–í –ø—Ä–æ—Ü–µ—Å—Å–µ'?'selected':''}>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
          <option ${r.status==='–ì–æ—Ç–æ–≤–æ'?'selected':''}>–ì–æ—Ç–æ–≤–æ</option>
          <option ${r.status==='–û—Ç–ª–æ–∂–µ–Ω–æ'?'selected':''}>–û—Ç–ª–æ–∂–µ–Ω–æ</option>
          <option ${r.status==='–û—Ç–º–µ–Ω–µ–Ω–æ'?'selected':''}>–û—Ç–º–µ–Ω–µ–Ω–æ</option>
        </select>
      </td>
      <td><button class="btn ghost" data-action="delete" data-idx="${idx}">–£–¥–∞–ª–∏—Ç—å</button></td>
    `;
    tbody.appendChild(tr);
  });

  // Attach listeners for inline edits and selects and delete
  tbody.querySelectorAll('[contenteditable]').forEach(cell=>{
    cell.onblur = ()=>{
      const idx = parseInt(cell.dataset.idx), field = cell.dataset.field;
      rows[idx][field] = cell.innerText.trim();
      saveMedia(rows);
      renderMedia(rows);
    };
  });
  tbody.querySelectorAll('select').forEach(sel=>{
    sel.onchange = ()=>{
      const idx = parseInt(sel.dataset.idx), field = sel.dataset.field;
      rows[idx][field] = sel.value;
      saveMedia(rows);
      renderMedia(rows);
    };
  });
  tbody.querySelectorAll('button[data-action="delete"]').forEach(btn=>{
    btn.onclick = ()=>{
      const idx = parseInt(btn.dataset.idx);
      if(confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?')){
        rows.splice(idx,1);
        saveMedia(rows);
        renderMedia(rows);
      }
    };
  });

  // Save after rendering to keep storage in sync
  saveMedia(rows);
}

// Add new blank row
function addRow(){
  const raw = localStorage.getItem(MEDIA_KEY);
  let rows = raw ? JSON.parse(raw) : [];
  rows.push({date:'', format:'', desc:'', resp:'–ù–∏–∫–∏—Ç–∞', status:'–í –ø—Ä–æ—Ü–µ—Å—Å–µ'});
  saveMedia(rows);
  renderMedia(rows);
}

// Clear media table
function clearMedia(){
  if(confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω?')){
    localStorage.removeItem(MEDIA_KEY);
    renderMedia([]);
  }
}

// Toast helper (small temporary message)
let toastTimer = null;
function showToast(msg){
  const existing = document.getElementById('toast');
  if(existing) existing.remove();
  const d = document.createElement('div');
  d.id='toast';
  d.style.position='fixed';
  d.style.right='18px';
  d.style.bottom='18px';
  d.style.background='rgba(11,99,164,0.95)';
  d.style.color='#fff';
  d.style.padding='10px 14px';
  d.style.borderRadius='10px';
  d.style.boxShadow='0 6px 18px rgba(2,6,23,0.2)';
  d.style.zIndex='120';
  d.innerText=msg;
  document.body.appendChild(d);
  if(toastTimer) clearTimeout(toastTimer);
  toastTimer = setTimeout(()=>{ d.remove(); }, 2200);
}

// Logout back to home
function logout(){ showPage('homePage'); showToast('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞'); }

// Utility: show simple message
function showMessageSimple(msg){ alert(msg); }

// Initialize: ensure home visible
showPage('homePage');
</script>

</body>
</html># -
